<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Ajouter un Module</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <h1>Ajouter un Module</h1>
  <form method="POST" action="{{ url_for('add_module') }}">
    <label>Nom du module :</label><br>
    <input type="text" name="nom" required><br>
    <label>École :</label><br>
    <input type="text" name="ecole" required><br>
    <label>Niveau :</label><br>
    <input type="text" name="niveau" required><br>
    <label>Tarif horaire CM (FCFA) :</label><br>
    <input type="number" name="tarif_cm" min="0" step="0.01" value="0"><br>
    <label>Tarif horaire TD (FCFA) :</label><br>
    <input type="number" name="tarif_td" min="0" step="0.01" value="0"><br>
    <label>Tarif horaire TP (FCFA) :</label><br>
    <input type="number" name="tarif_tp" min="0" step="0.01" value="0"><br>
    <label>Tarif horaire global (FCFA) :</label><br>
    <input type="number" id="tarif_horaire" name="tarif_horaire" min="0" step="0.01" readonly><br>
    <label>Heures CM :</label><br>
    <input type="number" name="heures_cm" min="0" required><br>
    <label>Heures TD :</label><br>
    <input type="number" name="heures_td" min="0" required><br>
    <label>Heures TP :</label><br>
    <input type="number" name="heures_tp" min="0" required><br><br>
    <button type="submit">Ajouter</button>
  </form>
  <p><a href="{{ url_for('index') }}">Retour au tableau de bord</a></p>

  <script>
    function calculateGlobalTarif() {
      const tarifCm = parseFloat(document.querySelector('input[name="tarif_cm"]').value) || 0;
      const tarifTd = parseFloat(document.querySelector('input[name="tarif_td"]').value) || 0;
      const tarifTp = parseFloat(document.querySelector('input[name="tarif_tp"]').value) || 0;
      const globalTarif = tarifCm + tarifTd + tarifTp;
      document.getElementById('tarif_horaire').value = globalTarif.toFixed(2);
    }

    // Ajouter des écouteurs d'événements
    document.querySelector('input[name="tarif_cm"]').addEventListener('input', calculateGlobalTarif);
    document.querySelector('input[name="tarif_td"]').addEventListener('input', calculateGlobalTarif);
    document.querySelector('input[name="tarif_tp"]').addEventListener('input', calculateGlobalTarif);

    // Calcul initial
    calculateGlobalTarif();
  </script>
</body>
</html>
